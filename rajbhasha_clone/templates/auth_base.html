{% load static %}
{% load django_bootstrap5 %}
{% load translate_tags %}
<!DOCTYPE html>
<html lang="{{ current_lang|default:'en' }}" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ "Rajya Bhaasha"|t:current_lang }}{% endblock %}</title>
    {% bootstrap_css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <style>
        body { transition: background-color 0.3s ease, color 0.3s ease; }
        [data-bs-theme="dark"] body { background-color: #121212 !important; color: #e0e0e0; }
        [data-bs-theme="dark"] .card, [data-bs-theme="dark"] .navbar { background-color: #1e1e1e !important; border-color: #333 !important; }
    </style>
    <style>
    :root { --main-font-size: 16px; }
    html, body, body * { font-size: var(--main-font-size) !important; transition: font-size 0.2s; }
    .font-medium { --main-font-size: 20px !important; }
    .font-large { --main-font-size: 24px !important; }
        .card-body {
    padding-bottom: 2rem !important; 
}
.card-body .d-grid {
    gap: 1.5rem !important;
}
.card-body .border-top {
    margin-top: 2rem !important;
    padding-top: 1.5rem !important;
}
    .d-flex {
        flex-wrap: wrap !important;
    }
    
    .navbar .d-flex, .input-group {
        flex-wrap: nowrap !important;
    }

    body, h1, h2, h3, h4, h5, h6, p, span, div {
        line-height: 1.6 !important;
        overflow-wrap: break-word;
    }

    .btn {
        white-space: normal !important;
        height: auto !important;
        min-height: 38px;
        padding-top: 8px;
        padding-bottom: 8px;
    }

    .card-body, .alert {
        height: auto !important;
        overflow: visible !important;
    }

    .justify-content-between {
        gap: 15px;
    }
    
    [data-bs-theme="dark"] .form-control, 
    [data-bs-theme="dark"] .form-select {
        background-color: #1e293b !important;
        border-color: #475569 !important;
        color: #f8fafc !important;
    }
    [data-bs-theme="dark"] .form-control:focus {
        background-color: #334155 !important;
        border-color: #6366f1 !important;
        box-shadow: 0 0 0 0.25rem rgba(99, 102, 241, 0.25);
    }

    .modal-body {
        padding-bottom: 2rem !important; 
    }
    .modal-body .d-grid {
        gap: 1.5rem !important;
    }
    .modal-body .border-top {
        margin-top: 2rem !important;
        padding-top: 1.5rem !important;
    }

    .alert-dismissible {
        position: relative;
        z-index: 9999 !important;
        margin-top: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
</style>
    {% block extra_css %}{% endblock %}
</head>
<body class="bg-light">
    <main class="container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show shadow-sm" role="alert">
                    {{ message|t:current_lang }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
    </main>
    {% bootstrap_javascript %}
    <script>
        const htmlElement = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'light';
        htmlElement.setAttribute('data-bs-theme', savedTheme);
        
        const fontSelector = document.getElementById('fontSelector');
        if (fontSelector) {
            fontSelector.addEventListener('change', function() {
                localStorage.setItem('fontSize', this.value);
                document.body.classList.remove('font-normal', 'font-medium', 'font-large');
                document.body.classList.add('font-' + this.value);
            });
            const savedFontSize = localStorage.getItem('fontSize') || 'normal';
            fontSelector.value = savedFontSize;
            document.body.classList.add('font-' + savedFontSize);
        }
    </script>
</body>
</html>
